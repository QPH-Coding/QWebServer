# 对象池

## 概述

对象池有以下的优点:

- 线程安全

- 使用模版/范型编程

- 可定制化对象的初始化及析构

## 具体设计

对象池使用一个 `std::vector` 存储对象，使用一个 `std::queue` 存储空闲对象的索引。

当调用`get_one()`时，将返回对象的引用，并且将这个对象的索引从空闲队列 `free_queue`中移除。

有时候，我们想要初始化对象并且在对象析构前做一些事情。考虑到这个需求，我在对象池中添加了一些成员，并且在合适的时机调用初始化和析构函数。

## 使用

当使用`get_one()`时，返回的是一个`Object<T>`，里面存储了裸的对象及其索引，很显然，这不优美也不方便，因此这是一个值得优化的点。

当你调用 `get_one()`后，你应该调用 `give_back_one()` 在你使用完这个对象后，这两个者的关系就像 `new` 和 `delete`。所以我建议使用RAII使用对象池。